\begin{algorithm}
    \caption{Weighted Equalized Odds (returns $weo$)}
    \label{alg:weo}
    \begin{algorithmic}[1]
        \Require $h$, $A$, $batch$ \hfill as in \Cref{alg:wdp}, \hfill $Y$: ground truth
        \State $weo \leftarrow 0$
        \State $est\_y\_i \leftarrow \mathbb{E}[h(batch) \mid Y = i]$ \hfill \(\forall i \in \{0, 1\}\)
        \ForAll{$a$ in $A$}
            \State $est\_a\_y\_i \leftarrow \mathbb{E}[h(batch) \mid A = a, Y = i]$ \hfill \(\forall i \in \{0, 1\}\)
            \State $p\_a \leftarrow \mathbb{P}[A = a]$
            \State $weo\_i \leftarrow \| est\_a\_y\_i - est\_y\_i \|$ \hfill \(\forall i \in \{0, 1\}\)
            \State $weo \leftarrow weo + \left( (weo\_0 + weo\_1) \cdot p\_a \right)$
        \EndFor
    \end{algorithmic}
\end{algorithm}