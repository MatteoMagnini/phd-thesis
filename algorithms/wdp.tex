\begin{algorithm}
    \caption{Weighted Demographic Parity (returns $wdp$)}
    \label{alg:wdp}
    \begin{algorithmic}[1]
        \Require $h$ \hfill predictive model
        \Require $A$ \hfill sensitive attribute
        \Require $batch$ \hfill dataset batch
        \State $wdp \leftarrow 0$
        \State $estimated \leftarrow \mathbb{E}[h(batch)]$
        \ForAll{$a$ in $A$}
            \State $estimated\_a \leftarrow \mathbb{E}[h(batch) \mid A = a]$
            \State $p\_a \leftarrow \mathbb{P}[A = a]$
            \State $wdp \leftarrow wdp + \left( \| estimated - estimated\_a \| \cdot p\_a \right)$
        \EndFor
    \end{algorithmic}
\end{algorithm}